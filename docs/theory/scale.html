<head>
  <link href="../favicon.ico" rel="shortcut icon" type="image/x-icon"/>
  <link href="../style.css" rel="stylesheet"/>
  <title>BQN Musician: Scales</title>
</head>
<div class="nav">(<a href="https://github.com/mlochbaum/BQN-musician">github</a>) / <a href="../index.html">BQN Musician</a> / <a href="index.html">theory</a></div>
<h1 id="scales"><a class="header" href="#scales">Scales</a></h1>
<p>Scales are pretty important in music, and there's a lot of intricate theory describing which scales are useful and how they relate to each other, and to chords. Here we'll just cover the basics: what's a scale and how do you describe it?</p>
<p>Well, music is made of notes, each of which has a particular frequency. I think I'll define a scale as a collection of frequencies and call that enough. 216 Hz, 491 Hz, and 804 Hz? Sure, that's a scale. Every multiple of 111 Hz? Sure. No notes at all? Fine, whatever. Music that's played <em>in</em> a scale is music where every note belongs to the scale. That's easy enough to express in BQN using the <a href="https://mlochbaum.github.io/BQN/doc/search.html#member-of">Member of</a> function, at least for finite scales.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=NDkx4oC/ODA04oC/NDkx4oC/NDkxIOKIiiAyMTbigL80OTHigL84MDQKCuKIp8K0IDQ5MeKAvzgwNOKAvzQ5MeKAvzQ5MSDiiIogMjE24oC/NDkx4oC/ODA0">â†—ï¸</a><pre>    <span class='Number'>491</span><span class='Ligature'>â€¿</span><span class='Number'>804</span><span class='Ligature'>â€¿</span><span class='Number'>491</span><span class='Ligature'>â€¿</span><span class='Number'>491</span> <span class='Function'>âˆŠ</span> <span class='Number'>216</span><span class='Ligature'>â€¿</span><span class='Number'>491</span><span class='Ligature'>â€¿</span><span class='Number'>804</span>
âŸ¨ 1 1 1 1 âŸ©

    <span class='Function'>âˆ§</span><span class='Modifier'>Â´</span> <span class='Number'>491</span><span class='Ligature'>â€¿</span><span class='Number'>804</span><span class='Ligature'>â€¿</span><span class='Number'>491</span><span class='Ligature'>â€¿</span><span class='Number'>491</span> <span class='Function'>âˆŠ</span> <span class='Number'>216</span><span class='Ligature'>â€¿</span><span class='Number'>491</span><span class='Ligature'>â€¿</span><span class='Number'>804</span>
1
</pre>
<p>Ideally we'd like to find some scales that help us make music, and we're definitely not there yet. Let's carry on.</p>
<h2 id="octave-scales"><a class="header" href="#octave-scales">Octave scales</a></h2>
<p>The most important harmonic relationship is the <em>octave</em>: a factor of two change in frequency (say, 220 to 440 Hz). It's named after the number 8 for very bad reasons; when you read &quot;octave&quot;, think &quot;two&quot;. It's so important that in a lot of harmonic theory, two frequencies an octave apart are considered to be different versions of the same note, and we'll use this convention in most of our study of scales.</p>
<p>We define an &quot;octave scale&quot; to be one that repeats every octave, or we might say that if it includes a frequency <code><span class='Value'>f</span></code>, it also includes <code><span class='Value'>f</span><span class='Function'>Ã—</span><span class='Number'>2</span></code> and <code><span class='Value'>f</span><span class='Function'>Ã·</span><span class='Number'>2</span></code>. By repeatedly applying the rule we get <code><span class='Value'>f</span><span class='Function'>Ã—</span><span class='Number'>4</span></code> and <code><span class='Value'>f</span><span class='Function'>Ã·</span><span class='Number'>4</span></code> and so on. The infinite set of all frequencies we get from <code><span class='Value'>f</span></code> in this way is an octave scale itself, the smallest one that contains <code><span class='Value'>f</span></code>. The proper name for such a set is a &quot;pitch class&quot;, but we'll usually just call it a &quot;note&quot; in our scale theory studies.</p>
<p>Taking the base 2 logarithm of a frequency <code><span class='Number'>2</span><span class='Function'>â‹†</span><span class='Modifier'>â¼</span><span class='Value'>f</span></code> converts all this multiplying and dividing by 2 to adding or subtracting 1.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=MiDii4bigbwg4p+oMywgM8OXMiwgM8O3MuKfqQ==">â†—ï¸</a><pre>    <span class='Number'>2</span> <span class='Function'>â‹†</span><span class='Modifier'>â¼</span> <span class='Bracket'>âŸ¨</span><span class='Number'>3</span><span class='Separator'>,</span> <span class='Number'>3</span><span class='Function'>Ã—</span><span class='Number'>2</span><span class='Separator'>,</span> <span class='Number'>3</span><span class='Function'>Ã·</span><span class='Number'>2</span><span class='Bracket'>âŸ©</span>
âŸ¨ 1.584962500721156 2.584962500721156 0.5849625007211562 âŸ©
</pre>
<p>So if we then look at only the fractional part <code><span class='Number'>1</span><span class='Function'>|</span><span class='Number'>2</span><span class='Function'>â‹†</span><span class='Modifier'>â¼</span><span class='Value'>f</span></code>, this is a kind of &quot;signature&quot; that is the same for every note in a pitch class. In theory, applying this before <code><span class='Function'>âˆŠ</span></code> with <a href="https://mlochbaum.github.io/BQN/doc/compose.html#over">Over</a>, that is, <code><span class='Function'>âˆŠ</span><span class='Modifier2'>â—‹</span><span class='Brace'>{</span><span class='Number'>1</span><span class='Function'>|</span><span class='Number'>2</span><span class='Function'>â‹†</span><span class='Modifier'>â¼</span><span class='Value'>ğ•©</span><span class='Brace'>}</span></code>, ought to identify membership in an octave scale. Logarithm being computed inexactly means this doesn't quite work, although a variation where we divide by a power of two does.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=NDkx4oC/ODA04oC/MjAx4oC/MjAw4oC/NDMyIOKIiuKXi3vwnZWpw7cy4ouG4oyKMuKLhuKBvPCdlal9IDIxNuKAvzQ5MeKAvzgwNA==">â†—ï¸</a><pre>    <span class='Number'>491</span><span class='Ligature'>â€¿</span><span class='Number'>804</span><span class='Ligature'>â€¿</span><span class='Number'>201</span><span class='Ligature'>â€¿</span><span class='Number'>200</span><span class='Ligature'>â€¿</span><span class='Number'>432</span> <span class='Function'>âˆŠ</span><span class='Modifier2'>â—‹</span><span class='Brace'>{</span><span class='Value'>ğ•©</span><span class='Function'>Ã·</span><span class='Number'>2</span><span class='Function'>â‹†âŒŠ</span><span class='Number'>2</span><span class='Function'>â‹†</span><span class='Modifier'>â¼</span><span class='Value'>ğ•©</span><span class='Brace'>}</span> <span class='Number'>216</span><span class='Ligature'>â€¿</span><span class='Number'>491</span><span class='Ligature'>â€¿</span><span class='Number'>804</span>
âŸ¨ 1 1 1 0 1 âŸ©
</pre>
<p>If we take 2 to the power of our signature, we can see what it's doing a little better: it multiplies or divides by 2 until the frequency falls in the range <code><span class='Number'>1</span><span class='Function'>â‰¤</span><span class='Value'>f</span><span class='Function'>&lt;</span><span class='Number'>2</span></code>.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=MuKLhjF8MuKLhuKBvCAwLjTigL8z4oC/NeKAvzfigL844oC/OQ==">â†—ï¸</a><pre>    <span class='Number'>2</span><span class='Function'>â‹†</span><span class='Number'>1</span><span class='Function'>|</span><span class='Number'>2</span><span class='Function'>â‹†</span><span class='Modifier'>â¼</span> <span class='Number'>0.4</span><span class='Ligature'>â€¿</span><span class='Number'>3</span><span class='Ligature'>â€¿</span><span class='Number'>5</span><span class='Ligature'>â€¿</span><span class='Number'>7</span><span class='Ligature'>â€¿</span><span class='Number'>8</span><span class='Ligature'>â€¿</span><span class='Number'>9</span>
âŸ¨ 1.6 1.5 1.25 1.75 1 1.125 âŸ©
</pre>
<p>That specific range is arbitrary (not to mention inaudible), but the important thing is that when the frequency would increase up to <code><span class='Number'>2</span></code>, it's reduced to <code><span class='Number'>1</span></code> and starts at the bottom again. So our frequencies now form a circle instead of a line. But neither of these are terribly musical shapes (if it were a triangle that would be a different matter). Carry on, once more.</p>
<h2 id="twelve-tone"><a class="header" href="#twelve-tone">Twelve-tone</a></h2>
<p>Modern music just about everywhere is now based on dividing the octave into twelve steps. The reason usually given for this is to consider the <code><span class='Number'>3</span><span class='Function'>Ã·</span><span class='Number'>2</span></code> ratio, the second simplest after the octave, and look at what happens when it's applied repeatedly:</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=Um91bmQg4oaQICjijIowLjXiirgrKeKMvigxMDDiirjDlykgICMgTmVhcmVzdCBodW5kcmVkdGgsIGZvciBkaXNwbGF5CgpSb3VuZCAy4ouGMXwy4ouG4oG8ICgzw7cyKeKLhuKGlTEz">â†—ï¸</a><pre>    <span class='Function'>Round</span> <span class='Gets'>â†</span> <span class='Paren'>(</span><span class='Function'>âŒŠ</span><span class='Number'>0.5</span><span class='Modifier2'>âŠ¸</span><span class='Function'>+</span><span class='Paren'>)</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>(</span><span class='Number'>100</span><span class='Modifier2'>âŠ¸</span><span class='Function'>Ã—</span><span class='Paren'>)</span>  <span class='Comment'># Nearest hundredth, for display
</span>
    <span class='Function'>Round</span> <span class='Number'>2</span><span class='Function'>â‹†</span><span class='Number'>1</span><span class='Function'>|</span><span class='Number'>2</span><span class='Function'>â‹†</span><span class='Modifier'>â¼</span> <span class='Paren'>(</span><span class='Number'>3</span><span class='Function'>Ã·</span><span class='Number'>2</span><span class='Paren'>)</span><span class='Function'>â‹†â†•</span><span class='Number'>13</span>
âŸ¨ 1 1.5 1.13 1.69 1.27 1.9 1.42 1.07 1.6 1.2 1.8 1.35 1.01 âŸ©
</pre>
<p>At step 12, we arrive at a frequency that's very nearly in the same pitch class as the starting <code><span class='Number'>1</span></code>. This is because that <code><span class='Number'>3</span><span class='Function'>Ã·</span><span class='Number'>2</span></code> ratio is very close to <code><span class='Number'>2</span><span class='Function'>â‹†</span><span class='Number'>7</span><span class='Function'>Ã·</span><span class='Number'>12</span></code>. Using that value instead we arrive back at the start exactly.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=Um91bmQgMuKLhjF8MuKLhuKBvCAoMuKLhjfDtzEyKeKLhuKGlTEz">â†—ï¸</a><pre>    <span class='Function'>Round</span> <span class='Number'>2</span><span class='Function'>â‹†</span><span class='Number'>1</span><span class='Function'>|</span><span class='Number'>2</span><span class='Function'>â‹†</span><span class='Modifier'>â¼</span> <span class='Paren'>(</span><span class='Number'>2</span><span class='Function'>â‹†</span><span class='Number'>7</span><span class='Function'>Ã·</span><span class='Number'>12</span><span class='Paren'>)</span><span class='Function'>â‹†â†•</span><span class='Number'>13</span>
âŸ¨ 1 1.5 1.12 1.68 1.26 1.89 1.41 1.06 1.59 1.19 1.78 1.33 1 âŸ©
</pre>
<p>We can stop at 12 notes to get an octave scale; sorting the frequencies reveals that these follow a very regular distribution, as each note is a factor of <code><span class='Number'>2</span><span class='Function'>â‹†Ã·</span><span class='Number'>12</span></code> (or <code><span class='Number'>12</span><span class='Function'>âˆš</span><span class='Number'>2</span></code>) larger than the previous.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=Um91bmQg4oinIDLii4YxfDLii4bigbwgKDLii4Y3w7cxMinii4bihpUxMgoKUm91bmQgICAgICAgICAgICgy4ouGIMO3MTIp4ouG4oaVMTI=">â†—ï¸</a><pre>    <span class='Function'>Round</span> <span class='Function'>âˆ§</span> <span class='Number'>2</span><span class='Function'>â‹†</span><span class='Number'>1</span><span class='Function'>|</span><span class='Number'>2</span><span class='Function'>â‹†</span><span class='Modifier'>â¼</span> <span class='Paren'>(</span><span class='Number'>2</span><span class='Function'>â‹†</span><span class='Number'>7</span><span class='Function'>Ã·</span><span class='Number'>12</span><span class='Paren'>)</span><span class='Function'>â‹†â†•</span><span class='Number'>12</span>
âŸ¨ 1 1.06 1.12 1.19 1.26 1.33 1.41 1.5 1.59 1.68 1.78 1.89 âŸ©

    <span class='Function'>Round</span>           <span class='Paren'>(</span><span class='Number'>2</span><span class='Function'>â‹†</span> <span class='Function'>Ã·</span><span class='Number'>12</span><span class='Paren'>)</span><span class='Function'>â‹†â†•</span><span class='Number'>12</span>
âŸ¨ 1 1.06 1.12 1.19 1.26 1.33 1.41 1.5 1.59 1.68 1.78 1.89 âŸ©
</pre>
<svg viewBox='-300 -100 600 200'>
  <path fill='none' stroke-linejoin='round' stroke='currentColor' stroke-width='2' d='M0 80L-40 -69.282L69.282 40L-80 -0L69.282 -40L-40 69.282L0 -80L40 69.282L-69.282 -40L80 -0L-69.282 40L40 -69.282z'/>
</svg>

<p>This octave scale is called the <em>chromatic scale</em>. But it's still not something anyone but Schoenberg would be proud to use! Carry on!</p>
